(()=>{"use strict";const e={en:"English",ar:"Arabic",hu:"Hungarian",vi:"Vietnamese",el:"Greek",da:"Danish",iw:"Hebrew",id:"Indonesian",es:"Spanish",it:"Italian",ca:"Catalan",zh:"Chinese",ko:"Korean",ms:"Malay",de:"German",nl:"Dutch",no:"Norwegian",pl:"Polish",pt:"Portuguese ",ro:"Romanian",ru:"Russian",sk:"Slovak",th:"Thai",tr:"Turkish",uk:"Ukrainian",fi:"Finnish",fr:"French",hi:"Hindi",hr:"Croatian",cs:"Czech",sv:"Swedish",ja:"Japanese"},a={en:"English",ar:"Arabic",hu:"Hungarian",vi:"Vietnamese",el:"Greek",da:"Danish",iw:"Hebrew",id:"Indonesian",is:"Icelandic",es:"Spanish",it:"Italian",ca:"Catalan",zh:"Chinese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",ms:"Malay",de:"German",nl:"Dutch",no:"Norwegian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sk:"Slovak",sl:"Slovenian",th:"Thai",tr:"Turkish",uk:"Ukrainian",fi:"Finnish",fr:"French",hi:"Hindi",hr:"Croatian",cs:"Czech",sv:"Swedish",et:"Estonian",ja:"Japanese"},n=e=>e.map((e=>({frameNode:e.parent,textNode:e})));var i,t;!function(e){e.EXPORT="EXPORT",e.TRANSLATE="TRANSLATE",e.CLOSE="CLOSE",e.CHANGE_FORMAT="CHANGE_FORMAT"}(i||(i={})),function(e){e.EXPORT="EXPORT",e.TRANSLATE="TRANSLATE"}(t||(t={}));figma.showUI(__html__,{width:300,height:158});const o={};let s=a,r=Object.keys(s);function c({type:e,payload:a}){figma.ui.postMessage({type:e,payload:a})}(e=>{const a=(e=>{const a={};return e.forEach((e=>{var n,i,t,o,s,r;(null===(n=e.frameNode)||void 0===n?void 0:n.id)&&!a[e.frameNode.id]&&(a[null===(i=e.frameNode)||void 0===i?void 0:i.id]={frameNode:e.frameNode,textNodes:[]}),(null===(t=e.frameNode)||void 0===t?void 0:t.id)&&a[e.frameNode.id]&&(a[null===(o=e.frameNode)||void 0===o?void 0:o.id]=Object.assign(Object.assign({},a[null===(s=e.frameNode)||void 0===s?void 0:s.id]),{textNodes:[...a[null===(r=e.frameNode)||void 0===r?void 0:r.id].textNodes,e.textNode]}))})),a})(n(e));return Object.keys(a).map((e=>a[e]))})(figma.currentPage.findAll((e=>"TEXT"===e.type)).filter((e=>figma.currentPage.selection.includes(e)))).forEach((e=>{const a=e.textNodes.map((e=>e.characters)).join("*");r.forEach((n=>{!function(e,a,n){c({type:t.TRANSLATE,payload:{node:e,language:a,text:n}})}(e,n,a)}))})),figma.ui.onmessage=function({type:n,payload:l}){switch(n){case i.TRANSLATE:!function(e,a,n,i){var t;const c=i.split("*"),l=null===(t=e.frameNode)||void 0===t?void 0:t.id,d=figma.currentPage.findOne((e=>e.id===l));if(d){const e=d.clone(),i=r.indexOf(n)+1;e.y+=e.height*i+200*i,e.name=`${d.name} - ${s[n]}`,e.findAll((e=>"TEXT"===e.type)).filter((e=>{const n=e;if(a.includes(n.characters))return n})).forEach(((e,a)=>{const n=c[a],i=e;figma.loadFontAsync(i.fontName).then((()=>{i.characters=n}))})),o[e.id]={frame:e,language:n}}}(l.node,l.original,l.language,l.text);break;case i.CHANGE_FORMAT:break;case i.EXPORT:!function(n){var i,s,r,l;i=this,s=void 0,l=function*(){let i=[];const s=Object.keys(o);for(let t=0;t<s.length;t++){const r=s[t],c=o[r];0===c.frame.exportSettings.length&&(c.frame.exportSettings=[{format:n.toUpperCase(),suffix:"",constraint:{type:"SCALE",value:1},contentsOnly:!0}]),console.log(c.frame.name,c.frame.name.replace("/"," "));for(let t of c.frame.exportSettings){let o=t;const s=yield c.frame.exportAsync(o);if("jpg"===n&&Object.keys(e).includes(c.language)){const e=c.frame.name.replace("/"," ");i.push({name:`${c.language}/${e}`,setting:t,bytes:s})}if("png"===n&&Object.keys(a).includes(c.language)){const e=c.frame.name.replace("/"," ");i.push({name:`${c.language}/${e}`,setting:t,bytes:s})}}}c({type:t.EXPORT,payload:{exportableBytes:i,format:n}})},new((r=void 0)||(r=Promise))((function(e,a){function n(e){try{o(l.next(e))}catch(e){a(e)}}function t(e){try{o(l.throw(e))}catch(e){a(e)}}function o(a){var i;a.done?e(a.value):(i=a.value,i instanceof r?i:new r((function(e){e(i)}))).then(n,t)}o((l=l.apply(i,s||[])).next())}))}(l);case i.CLOSE:}}})();