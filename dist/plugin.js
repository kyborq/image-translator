(()=>{"use strict";const e={en:"English",ar:"Arabic",hu:"Hungarian",vi:"Vietnamese",el:"Greek",da:"Danish",iw:"Hebrew",id:"Indonesian",es:"Spanish",it:"Italian",ca:"Catalan",zh:"Chinese",ko:"Korean",ms:"Malay",de:"German",nl:"Dutch",no:"Norwegian",pl:"Polish",pt:"Portuguese ",ro:"Romanian",ru:"Russian",sk:"Slovak",th:"Thai",tr:"Turkish",uk:"Ukrainian",fi:"Finnish",fr:"French",hi:"Hindi",hr:"Croatian",cs:"Czech",sv:"Swedish",ja:"Japanese"},n=Object.keys(e),t=e=>e.map((e=>({frameNode:e.parent,textNode:e})));var a,i;!function(e){e.EXPORT="EXPORT",e.TRANSLATE="TRANSLATE",e.CLOSE="CLOSE"}(a||(a={})),function(e){e.EXPORT="EXPORT",e.TRANSLATE="TRANSLATE"}(i||(i={}));figma.showUI(__html__,{width:300,height:158});const o={};function r({type:e,payload:n}){figma.ui.postMessage({type:e,payload:n})}(e=>{const n=(e=>{const n={};return e.forEach((e=>{var t,a,i,o,r,s;(null===(t=e.frameNode)||void 0===t?void 0:t.id)&&!n[e.frameNode.id]&&(n[null===(a=e.frameNode)||void 0===a?void 0:a.id]={frameNode:e.frameNode,textNodes:[]}),(null===(i=e.frameNode)||void 0===i?void 0:i.id)&&n[e.frameNode.id]&&(n[null===(o=e.frameNode)||void 0===o?void 0:o.id]=Object.assign(Object.assign({},n[null===(r=e.frameNode)||void 0===r?void 0:r.id]),{textNodes:[...n[null===(s=e.frameNode)||void 0===s?void 0:s.id].textNodes,e.textNode]}))})),n})(t(e));return Object.keys(n).map((e=>n[e]))})(figma.currentPage.findAll((e=>"TEXT"===e.type)).filter((e=>figma.currentPage.selection.includes(e)))).forEach((e=>{const t=e.textNodes.map((e=>e.characters)).join("*");n.forEach((n=>{!function(e,n,t){r({type:i.TRANSLATE,payload:{node:e,language:n,text:t}})}(e,n,t)}))})),figma.ui.onmessage=function({type:t,payload:s}){switch(t){case a.TRANSLATE:!function(t,a,i,r){var s;const d=r.split("*"),c=null===(s=t.frameNode)||void 0===s?void 0:s.id,f=figma.currentPage.findOne((e=>e.id===c));if(f){const t=f.clone(),r=n.indexOf(i)+1;t.y+=t.height*r+200*r,t.name=`${f.name} - ${e[i]}`,t.findAll((e=>"TEXT"===e.type)).filter((e=>{const n=e;if(a.includes(n.characters))return n})).forEach(((e,n)=>{const t=d[n],a=e;figma.loadFontAsync(a.fontName).then((()=>{a.characters=t}))})),o[t.id]={frame:t,language:i}}}(s.node,s.original,s.language,s.text);break;case a.EXPORT:!function(e){var n,t,a,s;n=this,t=void 0,s=function*(){let n=[];const t=Object.keys(o);for(let a=0;a<t.length;a++){const i=t[a],r=o[i];0===r.frame.exportSettings.length&&(r.frame.exportSettings=[{format:e.toUpperCase(),suffix:"",constraint:{type:"SCALE",value:1},contentsOnly:!0}]);for(let e of r.frame.exportSettings){let t=e;const a=yield r.frame.exportAsync(t);n.push({name:`${r.language}/${r.frame.name}`,setting:e,bytes:a})}}r({type:i.EXPORT,payload:{exportableBytes:n,format:e}})},new((a=void 0)||(a=Promise))((function(e,i){function o(e){try{d(s.next(e))}catch(e){i(e)}}function r(e){try{d(s.throw(e))}catch(e){i(e)}}function d(n){var t;n.done?e(n.value):(t=n.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}d((s=s.apply(n,t||[])).next())}))}(s);case a.CLOSE:}}})();