(()=>{"use strict";const e={en:"English",ar:"Arabic",hu:"Hungarian",vi:"Vietnamese",el:"Greek",da:"Danish",iw:"Hebrew",id:"Indonesian",es:"Spanish",it:"Italian",ca:"Catalan",zh:"Chinese",ko:"Korean",ms:"Malay",de:"German",nl:"Dutch",no:"Norwegian",pl:"Polish",pt:"Portuguese ",ro:"Romanian",ru:"Russian",sk:"Slovak",th:"Thai",tr:"Turkish",uk:"Ukrainian",fi:"Finnish",fr:"French",hi:"Hindi",hr:"Croatian",cs:"Czech",sv:"Swedish",ja:"Japanese"},n={en:"English",ar:"Arabic",hu:"Hungarian",vi:"Vietnamese",el:"Greek",da:"Danish",iw:"Hebrew",id:"Indonesian",is:"Icelandic",es:"Spanish",it:"Italian",ca:"Catalan",zh:"Chinese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",ms:"Malay",de:"German",nl:"Dutch",no:"Norwegian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sk:"Slovak",sl:"Slovenian",th:"Thai",tr:"Turkish",uk:"Ukrainian",fi:"Finnish",fr:"French",hi:"Hindi",hr:"Croatian",cs:"Czech",sv:"Swedish",et:"Estonian",ja:"Japanese"},a=e=>e.map((e=>({frameNode:e.parent,textNode:e})));var i,t;!function(e){e.EXPORT="EXPORT",e.TRANSLATE="TRANSLATE",e.CLOSE="CLOSE",e.CHANGE_FORMAT="CHANGE_FORMAT"}(i||(i={})),function(e){e.EXPORT="EXPORT",e.TRANSLATE="TRANSLATE"}(t||(t={}));figma.showUI(__html__,{width:300,height:158});const o={};let s=n,r=Object.keys(s);function c({type:e,payload:n}){figma.ui.postMessage({type:e,payload:n})}(e=>{const n=(e=>{const n={};return e.forEach((e=>{var a,i,t,o,s,r;(null===(a=e.frameNode)||void 0===a?void 0:a.id)&&!n[e.frameNode.id]&&(n[null===(i=e.frameNode)||void 0===i?void 0:i.id]={frameNode:e.frameNode,textNodes:[]}),(null===(t=e.frameNode)||void 0===t?void 0:t.id)&&n[e.frameNode.id]&&(n[null===(o=e.frameNode)||void 0===o?void 0:o.id]=Object.assign(Object.assign({},n[null===(s=e.frameNode)||void 0===s?void 0:s.id]),{textNodes:[...n[null===(r=e.frameNode)||void 0===r?void 0:r.id].textNodes,e.textNode]}))})),n})(a(e));return Object.keys(n).map((e=>n[e]))})(figma.currentPage.findAll((e=>"TEXT"===e.type)).filter((e=>figma.currentPage.selection.includes(e)))).forEach((e=>{const n=e.textNodes.map((e=>e.characters)).join("*");r.forEach((a=>{!function(e,n,a){c({type:t.TRANSLATE,payload:{node:e,language:n,text:a}})}(e,a,n)}))})),figma.ui.onmessage=function({type:a,payload:l}){switch(a){case i.TRANSLATE:!function(e,n,a,i){var t;const c=i.split("*"),l=null===(t=e.frameNode)||void 0===t?void 0:t.id,d=figma.currentPage.findOne((e=>e.id===l));if(d){const e=d.clone(),i=r.indexOf(a)+1;e.y+=e.height*i+200*i,e.name=`${d.name} - ${s[a]}`,e.findAll((e=>"TEXT"===e.type)).filter((e=>{const a=e;if(n.includes(a.characters))return a})).forEach(((e,n)=>{const a=c[n],i=e;figma.loadFontAsync(i.fontName).then((()=>{i.characters=a}))})),o[e.id]={frame:e,language:a}}}(l.node,l.original,l.language,l.text);break;case i.CHANGE_FORMAT:break;case i.EXPORT:!function(a){var i,s,r,l;i=this,s=void 0,l=function*(){let i=[];const s=Object.keys(o);for(let t=0;t<s.length;t++){const r=s[t],c=o[r];0===c.frame.exportSettings.length&&(c.frame.exportSettings=[{format:a.toUpperCase(),suffix:"",constraint:{type:"SCALE",value:1},contentsOnly:!0}]);const l=figma.currentPage.selection.map((e=>e.id)),d=l.length>0;for(let t of c.frame.exportSettings){let o=t;const s=yield c.frame.exportAsync(o);if("jpg"===a&&Object.keys(e).includes(c.language)&&(d&&l.includes(c.frame.id)||!d)){const e=c.frame.name.replace("/"," ");i.push({name:`${c.language}/${e}`,setting:t,bytes:s})}if("png"===a&&Object.keys(n).includes(c.language)&&(d&&l.includes(c.frame.id)||!d)){const e=c.frame.name.replace("/"," ");i.push({name:`${c.language}/${e}`,setting:t,bytes:s})}}}console.log("exporting...",i),c({type:t.EXPORT,payload:{exportableBytes:i,format:a}})},new((r=void 0)||(r=Promise))((function(e,n){function a(e){try{o(l.next(e))}catch(e){n(e)}}function t(e){try{o(l.throw(e))}catch(e){n(e)}}function o(n){var i;n.done?e(n.value):(i=n.value,i instanceof r?i:new r((function(e){e(i)}))).then(a,t)}o((l=l.apply(i,s||[])).next())}))}(l);case i.CLOSE:}}})();