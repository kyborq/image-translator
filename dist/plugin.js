(()=>{"use strict";const e={en:"English",ar:"Arabic"},t=Object.keys(e),n=e=>e.map((e=>({frameNode:e.parent,textNode:e})));var o,a;!function(e){e.EXPORT="EXPORT",e.TRANSLATE="TRANSLATE",e.CLOSE="CLOSE"}(o||(o={})),function(e){e.EXPORT="EXPORT",e.TRANSLATE="TRANSLATE"}(a||(a={}));figma.showUI(__html__,{width:300,height:158});const i={};function r({type:e,payload:t}){figma.ui.postMessage({type:e,payload:t})}(e=>{const t=(e=>{const t={};return e.forEach((e=>{var n,o,a,i,r,c;(null===(n=e.frameNode)||void 0===n?void 0:n.id)&&!t[e.frameNode.id]&&(t[null===(o=e.frameNode)||void 0===o?void 0:o.id]={frameNode:e.frameNode,textNodes:[]}),(null===(a=e.frameNode)||void 0===a?void 0:a.id)&&t[e.frameNode.id]&&(t[null===(i=e.frameNode)||void 0===i?void 0:i.id]=Object.assign(Object.assign({},t[null===(r=e.frameNode)||void 0===r?void 0:r.id]),{textNodes:[...t[null===(c=e.frameNode)||void 0===c?void 0:c.id].textNodes,e.textNode]}))})),t})(n(e));return Object.keys(t).map((e=>t[e]))})(figma.currentPage.findAll((e=>"TEXT"===e.type)).filter((e=>figma.currentPage.selection.includes(e)))).forEach((e=>{const n=e.textNodes.map((e=>e.characters)).join("*");t.forEach((t=>{!function(e,t,n){r({type:a.TRANSLATE,payload:{node:e,language:t,text:n}})}(e,t,n)}))})),figma.ui.onmessage=function({type:n,payload:c}){switch(n){case o.TRANSLATE:!function(n,o,a,r){var c;const d=r.split("*"),f=null===(c=n.frameNode)||void 0===c?void 0:c.id,s=figma.currentPage.findOne((e=>e.id===f));if(s){const n=s.clone(),r=t.indexOf(a)+1;n.y+=n.height*r+200*r,n.name=`${s.name} - ${e[a]}`,n.findAll((e=>"TEXT"===e.type)).filter((e=>{const t=e;if(o.includes(t.characters))return t})).forEach(((e,t)=>{const n=d[t],o=e;figma.loadFontAsync(o.fontName).then((()=>{o.characters=n}))})),i[n.id]={frame:n,language:a}}}(c.node,c.original,c.language,c.text);break;case o.EXPORT:!function(e){var t,n,o,c;t=this,n=void 0,c=function*(){let t=[];const n=Object.keys(i);for(let o=0;o<n.length;o++){const a=n[o],r=i[a];0===r.frame.exportSettings.length&&(r.frame.exportSettings=[{format:e.toUpperCase(),suffix:"",constraint:{type:"SCALE",value:1},contentsOnly:!0}]);for(let e of r.frame.exportSettings){let n=e;const o=yield r.frame.exportAsync(n);t.push({name:`${r.language}/${r.frame.name}`,setting:e,bytes:o})}}r({type:a.EXPORT,payload:{exportableBytes:t,format:e}})},new((o=void 0)||(o=Promise))((function(e,a){function i(e){try{d(c.next(e))}catch(e){a(e)}}function r(e){try{d(c.throw(e))}catch(e){a(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(i,r)}d((c=c.apply(t,n||[])).next())}))}(c);case o.CLOSE:}}})();